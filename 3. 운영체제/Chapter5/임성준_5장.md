## 5장 프로세스 관리



### 프로세스의 개념 및 상태

- 프로세스는 실행 중인 프로그램이라는 뜻

- 프로세스의 상태는 실행, 준비, 봉쇄 세 가지
  - CPU는 하나뿐이므로 실제로 실행 단계에 있는 프로세스는 매 시점 하나뿐
  - 준비 상태는 CPU만 할당받으면 바로 실행되지만 CPU를 할당받지 못한 상태
  - 봉쇄 상태는 CPU를 할당받더라도 실행 할 수 없는 상태



### 프로세스 제어블록(Process Control Block: PCB)

- 프로세스마다 유지하는 정보들을 담는 커널 내의 자료구조
  - 프로세스의 상태
  - 프로그램 카운터의 값
  - CPU 레지스터의 값
  - CPU 스케줄링 정보
  - 메모리 관리 정보
  - 자원 사용 정보
  - 입출력 상태 정보



### 문맥교환

> 하나의 프로세스로부터 다른 사용자 프로세스로 CPU의 제어권이 이양되는 과정

-  프로세스 실행 중

- 타이머 인터럽트 발생 OR 실행중이던 프로세스가 입출력 요청 등으로 CPU를 회수 당하는 경우

- CPU 제어권 운영체제로 넘어감

- 운영체제가 수행중이던 프로세스의 문맥을 저장

- 새롭게 실행시킬 프로세스에게 CPU 이양 

  - 기존 프로세스 실행 -> 준비 / 문맥을 자신의 PCB에 저장

  - 새로운 프로세스 준비 -> 실행 / PCB에 저장되어 있던 자신의 문맥을 가져와 복원

    

**CPU 할당시간** : CPU 할당시간이 너무 작으면 빈번한 문맥교환으로 오버헤드가 커지고, 너무 크면 시분할 시스템의 의미가 퇴색되므로 적절한 설정이 필요



### 프로세스 스케줄링을 위한 큐

> 큐는 PCG를 연결 리스트 형태로 관리하고 포인터를 사용해 순서를 정한다.

- 준비 큐
  - 준비 상태에 있는 프로세스들을 줄 세우기 위한 큐
- 장치 큐
  - 특정 자원을 기다리는 프로세스들을 줄 세우기 위한 큐
  - 예시) 디스크에 입출력 서비스를 요청한 프로세스들

- 작업 큐
  - 시스템 내의 모든 프로세스를 관리하기 위한 큐

 

### 스케줄러

> 어떤 프로세스에게 자원을 할당할지를 결정하는 운영체제 커널의 코드

- 장기 스케줄러
  - 작업 스케줄러라고도 부름
  - 어떤 프로세스를 준비 큐에 진입시킬지 결정
  - 가끔 호출되기 때문에 느려도 허용
  - 메모리에 올라가있는 프로세스 수를 조절
  - 현대의 시분할 시스템에서는 대부분 미사용 ( 사용가능 메모리가 늘어남으로써 )
- 단기 스케줄러
  - CPU 스케줄러라고도 부름
  - 준비 상태의 프로세스 중에서 어떤 프로세스를 다음번에 실행 상태로 만들지 결정
  - 빈번하므로 속도가 빠름

- 중기 스케줄러

  - 너무 많은 프로세스에게 메모리를 할당해 시스템 성능저하를 방지하기위해

  - 너무 많은 프로세스가 메모리 상에 올라가면 스왑아웃 시키는 역할 수행

    **스왑아웃** : 프로세스 중 일부의 메모리를 통째로 뺴앗아 그 내용을 디스크의 스왑영역에 저장

  - 중기 스케줄러로 인해 스왑아웃 된 프로세스는 **중지 상태**가 된다.



### 프로세스의 생성

> 부모 프로세스는 모든 자식 프로세스가 종료 된 후 종료 가능

- 자식 프로세스를 생성 시 부모 프로세스를 유닉스 에서는 fork() 시스템 콜을 통해 복제 생성
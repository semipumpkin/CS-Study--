# Chapter 4. 액세스 회선을 통해 인터넷 내부로!

# 💗 문제

## 1. 업로드와 다운로드 중 어느 것이 빠르며 그 이유는 무엇인가요 ?

 인터넷은 연결은 대칭형과 비대칭형이 있는데 이에 따라 업로드와 다운로드 속도가 바뀝니다. 대칭형은 업로드와 다운로드 속도가 같은데 비대칭형의 경우 ADSL은 업로드보다 다운로드에 더 많은 주파수 대역폭을 할당하기 때문이다. FTTH는 내부에서 다운로드에 할당하는  선의 수가 더 많기 때문이다. 



## 2. PPP와 PPPoE의 차이점 ?

 패킷 통신에 있어서 이더넷 상에서 보안이 이루어지지 않아 HDC 프로토콜을 사용한 PPP 헤더가 사용되는데 이는  ADSL과 FTTH에서는 HDC 프로토콜을 사용할 수 없기 때문에 PPPoE를 사용한다. BAS는 PPPoE 프로토콜을 사용할 때 로그인 동작의 창구 역할을 한다.



## 1. ADSL 기술을 이용한 액세스 회선의 구조와 동작



### 1. 액세스회선

- 인터넷과 가정이나 회사의  LAN을 연결하는 통신 회선을 말한다. 통신 회선의 사용법 중 하나이다.
- 일반 가정이라면 ADSL, FTTH, CATV, 전화회선, ISDN등을 액세스 회선으로 사용한다.



### 2. [ADSL](https://ko.wikipedia.org/wiki/%EB%B9%84%EB%8C%80%EC%B9%AD_%EB%94%94%EC%A7%80%ED%84%B8_%EA%B0%80%EC%9E%85%EC%9E%90_%ED%9A%8C%EC%84%A0) ✅

- **ADSL**(Asymmetric Digital Subscriber Line, 비대칭 디지털 가입자 회선)은 [DSL](https://ko.wikipedia.org/wiki/디지털_가입자_회선)의 한 형식으로, [구리](https://ko.wikipedia.org/wiki/구리) [전화선](https://ko.wikipedia.org/wiki/전화선)을 통해 전통적인 [보이스밴드](https://ko.wikipedia.org/w/index.php?title=보이스밴드&action=edit&redlink=1) [모뎀](https://ko.wikipedia.org/wiki/모뎀)보다 데이터를 더 빠르게 전송하도록 도와 주는 데이터 통신 기술이다. 전화선을 이용하여 인터넷 통신을 하는 방법.
- [SDSL](https://ko.wikipedia.org/wiki/동기_디지털_가입자_회선)과의 차이를 보면, SDSL은 데이터 업로드 속도와 다운로드 속도가 똑같은 데 반해 ([대칭형](https://ko.wikipedia.org/wiki/대칭성)), **ADSL은 언제나 업로드 속도가 다운로드 속도보다 느리다.** 



### 2-1. (참고) ADSL 통신 순서

0) 허브 -> 라우터 -> 인터넷 접속용 라우터

1) 인터넷 접속용 라우터 -> ADSL 모뎀

2) 셀을 세분화 

3) 전기신호로 변환 송출

4) 스플리터

5) DSLAM(모뎀집합)

6) BAS에 도착 



### 3. 프로바이더 ✅

- **인터넷 서비스 제공자**(Internet service provider; ISP)는 인터넷에 접속하는 수단을 제공하는 주체를 가리키는 말이다. 그 주체는 영리를 목적으로 하는 사기업인 경우가 대다수이나 비영리 공동체가 주체인 경우도 있다.
- ISP는 일반적으로 인터넷에서 이용 가능한 모든 것에 대한 접근권을 사용자에게 부여하는 액세스 포인트나 [게이트웨이](https://ko.wikipedia.org/wiki/게이트웨이) 역할을 한다.



### 4. ADSL의 변조방식과 그 방식을 택하는 이유

#### ① ADSL의 변조방식

- `진폭 변조(ASK)`

  - 진폭(신호의 세기)에 0과 1을 대응 시키는 방법
  - 작은 진폭은 0, 큰 진폭은 1로하는 2단계부터 이 크고 작음을 세분화한 4,8,16, ... 단계등으로 나눌 수 있다.
  - 이렇게 단계를 나누고, 비트수를 늘려서 고속화할 수 있다.
  - **but**, 신호는 전달되는 도중 감쇠와 잡음의 영향으로 파형이 변형 될 수 있기때문에, 단계를 너무 늘리면 최종 수신처에 도착하는 신호가 달라지고, 오휴의 원인이 된다. 따라서, 오류가 생기지 않게끔 단계수를 적절히 억제해야한다.

  

- `위상 변조(QAM)`

  - 신호의 위상에 0과 1일 대응 시키는 방법
  - 파는 일주기만에 원래 모습으로 되돌아가므로 원을 한바퀴 돌고 돌아오는 동작에 이것을 적용하여 0도에서 360도 각도를 나타내고, 이 각도를 위상이라고 한다.
  - 0도 에서 시작하는 파는 0, 180도에서 시작하는 파는 1에 대응 시킬 수 있다. 위 와마찬가지로 각도를 세분화하여 단계를 나눌 수 있다.
  - 마찬가지로 단계를 세분하면 고속화할 수 있지만, 각도가 가까워지면 판별할 수 없게 되어 오류가 발생하기 쉽고 고속화에는 한계가 있다.



- `직교 진폭 변조`
  - 위 두가지를 결합한 것으로, 진폭과 위상에 각각 1비트를 대응 시키고, 한개의 파에 2비트 분의 데이터를 대응 시킨다.
  - 위 식을 결합해서 한개의 파에 대응 시키는 비트 수를 늘려 속도를 높인 것이 직교 진폭 변조 방식이다.
  - 직교진폭변조도 단계를 늘려가며 대응시킬 수 있는 비트를 늘릴 수 있다. 하지만 이것도 마찬가지로 단계수가 증가하면 판별할 수 없고, 고속화에 한계가 있다.



#### ② 그 방식을 택하는 이유(변조 방식이 LAN과 다른 이유)

1. LAN은 사각형 신호를 이용해 0,1을 간단하게 변환하지만, 이는 뭉개지기 쉽고 거리가 떨어진 경우 오류를 일으키기 쉽다.

2. 사각형 신호는 낮은 주파수에서 높은 주파수까지 넓은 범위가 포함되어 있어, 신호의 주파수가 높아지면 잡음이 증가하고 이를 제어하기 어려워진다.





### 5. ADSL 고속화

- 위의 변조방식들로는 고속화를 하는 것에 한계가 있다. 한가지 주파수만을 사용하기 떄문이다.
- 주파수는 혼합이 가능하다. 주파수가 서로다른 파를 혼합하여, 특정 주파수의 파만을 통과시키는 필터회로를 이용하여 파를 분히 할 수 있으며, ADSL은 이 성질을 사용하여 다수의 파에 비트값을 대응시켜 고속화를 꾀한다.
- 수백개의 파를 사용하여 각각의 파에 `직교진폭변조`에 의해 비트값을 대응 키는데, 잡음이 없는 주파수에는 다수의 비트를, 잡음이 있는 주파수에는 소수르 비트만 대응 시킨다. 그리고 각 파에 대응시킨 비트수를 합한 값에 의해 전송 속도가 결정된다.



### 6. 업로드/다운로드 속도 차이의 이유 ✅

- 업로드는 26개의 파를 이용하지만, 다운로드에는 95개나 223개라는 많은 수의 파를 이용한다. 파의 수에 따라 고속화가 되기 때문에 다운로드가 빠른 것이다.



### 7. 스플리터

- 전화회선에서 신호가 흘러들어온 경우 동작하며, 전화와 ADSL의 신호를 나누는 역할을 한다.
- 스플리터의 역할
  1. 전화기에서는 ADSL신호가 잡음이 되서 전화음성을 듣는데 방해요소가 된다. 그래서 신호를 분리하여 전화기에 ADSL 신호가 흐르지 않도록 차단한다. 
     - ADSL의 높은 주파수의 신호만 차단하는 것이다.
  2. 전화기측이 ADSL에 끼치는 영향을 방지한다.
     - ADSL로 통신중에 수화기를 들면 신호를 전달하는 쪽이 변해서 통신이 수십초정도 중단되는데 스플리터는 이를 방지한다.



### 





## 2. 광섬유를 이용한 액세스 회선 (FTTH)

### 1. FTTH ✅

- 액세스 회선 종류 중 하나로 광섬유를 사용한다. 밝으면 1, 어두우면 0
- `Fiber to the home` ([FTTH](https://ko.wikipedia.org/wiki/FTTH)) 집안에까지 광라인이 들어가는 경우, 현재 한국에는 선두 업체인 [KT](https://ko.wikipedia.org/wiki/KT)와 후발 업체인 [SK브로드밴드](https://ko.wikipedia.org/wiki/SK브로드밴드), [LG유플러스](https://ko.wikipedia.org/wiki/LG유플러스)의 EPON 서비스가 일반가정까지 광라인이 들어가서 기가 인터넷 서비스가 되고 있다.



### 2. 코어 싱글모드 vs 멀티모드

- 코어는 광섬유에서 光이 이동하는 부분이다.
- 코어의 직경에 따라 직경기 가느다란 `싱글모드`, 굵은 `멀티모드` 두가지로 분류할 수 있다.
- 싱글모드
  - 코어가 가늘고 입사각이 작은 빛만 속으로 들어가므로 위상이 같은 각도 중 가장 작은 각도의 빛만 들어간다.
- 멀티모드
  - 입사각이 큰 빛도 들어갈 수 있으므로, 복수의 빛이 코어속을 진행한다.
- 즉, 싱글모드 멀티모드는 위상이 같은 각도수가 한개인지 여러개인지를 나타낸다.





## 3. 액세스 회선으로 이용하는 PPP와 터널링

### 1. BAS ✅

- Broadband Access Server 라우터의 일종. 일반 라우터와 기본적인 내용을 같지만, 광대역 원격 액세스 장치와 트래픽을 라우팅하기 위해 추가적인 기능을 한다.
- `본인 확인` 과 `설정값 통지` 역할을 한다. 이 역할을 실현하기 위해 `PPPoE`라는 구조를 사용한다.



### 2. PPP

- **점대점 프로토콜**(Point-to-Point Protocol)는 두 통신 노드 간의 직접적인 연결을 위해 일반적으로 사용되는 [데이터 링크](https://ko.wikipedia.org/wiki/데이터_링크) [프로토콜](https://ko.wikipedia.org/wiki/프로토콜)이다.  다이얼 업 접속이다.
- 사용자명, 패스워드를 이용해서 서로 확인하고 통신이 가능한 상태로 만드는 역할을 한다.
- ADSL이나 FTTH는 사용자와 BAS 케이블을 고정적으로 접속하므로 본인인지 확인할 필요가 없어서 PPP를 사용할 필요가 없지만, PPP를 남겨두면 사용자명에 따라 프로바이더를 전환할 수 있어 편리하다. 이것이 ADSL이나 FTTH에 PPP를 사용하는 이유이다.
- PPP는 HDLC 라는 프로토콜을 사용한다.



### 3. PPPoE

- **PPPoE**(Point-to-Point Protocol over Ethernet) : [이더넷](https://ko.wikipedia.org/wiki/이더넷) 프레임 안에 [PPP](https://ko.wikipedia.org/wiki/점대점_프로토콜) 프레임을 넣어 만들 때 사용되는 [통신 프로토콜](https://ko.wikipedia.org/wiki/통신_프로토콜)
- ADSL이나 FTTH는 PPP 프로토콜을 그대로 사용할 수 없다(HDLC 프로토콜 적용불가)  . 그래서 이를 이더넷 패킷으로 한 PPP인 PPPoE를 사용한다.



### 4. 터널링

- BAS의 또 다른 역할 중 하나로, 패킷을 운반하는 기능을 뜻한다.
- 패킷을 인터넷 상의 가상의 파이프를 통해 전달시키는 기술로, 패킷 내에 터널링 할 대상을 캡슐화 시켜 목적지까지 전송한다.
- `TCP 커넥션` 방식 : 패킷을 그대로 보내는 것 = 헤더 + 데이터
- `캡슐화` 방식 : 헤더도 포함한 패킷 전체를 별도의 패킷안에 저장하여 보내는 것 : 헤더 + (헤더 + 데이터 )





## 4. 프로바이더의 내부

### 1. POP

- point ot pewsence ; 네트워크 상호간 또는 개별 네트워크에 대한 접속점 또는 접근점

- ADSL이나 FTTH의 액세스 회선은 사용자가 계약한 프로바이터의 설비에 연결되어 있다. 이 설비를 POP라고 한다.



### 2. NOC

- network operation center ; 프로바이더의 핵심이 되는 설비로서, POP에서 들어온 패킷이 여기에 모인다.
- POP와 NOC는 완전이 분리된 개념이 아니다. POP의 규모가 큰것이  NOC로 생각하는 것이 좋다.
- POP와 NOC모두 실체가 있는 공간 안의 설비로, 쉽게 생각하면 지역에 있는 KT, LG, SK 인터넷 서비스를 제공하기 위한 장비 및 서버가 모여있는 곳? 전화국? 정도로 생각하면 좋다. (정확하지 않음)





## 5. 프로바이더를 경유하여 흐르는 패킷



### 1. 프로바이더끼리의 접속

프로바이더가 서로 다르더라도, 라우터 상에는 전세계 모든 곳에 대한 경로표가 존재하기 때문에 경로표에 등록되어 있기만 하면 중계 대상을 발견하고 거기로 패킷을 보낸다. 그래서 서로 다른 통신사 인터넷(와이파이)로 정보를 보내거나, 지구 반대편으로 통신을 하는 것도 가능하다.





### 2. 프로바이더끼리의 정보교환하기

1. 트랜지트
   - 접속 상대에서 전체 경로를 통지한다.
   - 그러면 상대는 현재 접속된 프로바이더를 통해 인터넷 전체에 패킷을 송신할 수 있다.

2. 피어(IX경유)
   - 물리적으로 `IX`를 통해 접속을 해도 전원과 패킷을 교환하지 않는다.
   - 경로를 통지한 라우터들 사이에만 패킷이 흐른다.
3. 피어(직접 접속)
   - 자신에게 직접 접속되어 있는 네트워크에 대한 경로 정보만 상대에게 통지한다
   - 그러면 상대는 자신에게 직접 접속한 네트워크로 갈 패킷만 보낸다.



### 3. IX

- 프로바이더 끼리 접속하는 방법은 일반적으로 프로바이더와 프로바이더가 직접  1:1로 접속하는 것이 기본이다.
- 하지만 이것만으로는 한계가 있어서, 모든 프로바이더와 통신 회선을 연결하여 중심이 되는 설비를 설치하고, 이 중심 설비를 경유하여 접속하면 통신 회선을 억제할 수 있다. 이때 이 중심 설비를 IX(Internet eXchange)라고한다.
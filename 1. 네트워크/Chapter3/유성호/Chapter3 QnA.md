# Chapter3 문제 만들기

##### 리피터 허브

Q1. 전기 신호가 전달될 때, 케이블의 길이가 길수록 잡음의 영향을 많이 받아 신호가 왜곡된다. 이를 방지하기 위한 방법은?

A1. 트위스트 페어 케이블을 사용한다. 트위스트 페어 케이블은 두 가닥의 신호선을 나선형으로 꼰 케이블로, 전자파에 의해 생기는 케이블 내의 전류를 상쇄(서로 다른 방향으로 진행하는 유도전류가 서로 상쇄됨)시킬 수 있고, 거리가 가까워 생기는 잡음 또한 미세한 간격 조절로 상쇄시켜 줄 수 있다.



Q2. 리피터 허브란 무엇인가?

A2. 도착한 신호를 증폭시켜 연결되어 있는 LAN 전체에 뿌려주는 역할을 하는 기기이다. 수신처 MAC 주소를 가진 기기에서는 리피터 허브에서 뿌린 패킷 신호를 수신하고, 나머지 기기는 폐기한다.



Q3. 리피터 회로에서 변형된 신호를 뿌린 경우 변형된 채로 전달된 패킷은 어떻게 되는가?

A3. 다음 기기에 도달하여 패킷 맨 끝에 있는 FCS(Frame Check Sequence)를 검사하고, 데이터 변화가 판명된 후 변화된 패킷은 폐기된다. 그 후 프로토콜 스택의 TCP 담당 부분이 패킷을 다시 보낸다.



##### 스위칭 허브

Q4. 스위칭 허브란?

A4. 스위칭 허브는 MAC 주소표를 이용하여 패킷의 MAC주소에 해당하는 기기가 연결된 포트를 송신 포트로 사용하여 패킷을 목적지로 보내는 역할을 한다. 이때 포트를 향한 이동시에 스위치 회로를 사용하기 때문에 스위칭 허브라는 이름이 붙었다. 



Q5. 리피터 허브와 스위칭 허브의 차이점?

A5. 보통의 경우 리피터 허브는 연결된 모든 기기에 신호를 보내고 한 번에 하나의 신호만 흘릴 수 있다. 반면 스위칭 허브는 특정 포트에 신호를 보낸고(패킷을 수신한 포트로는 절대 패킷을 재송신 하지 않음) 송신과 수신을 동시에 실행하는 전이중 모드가 가능하며, 비어있는 포트를 이용하여 동시에 여러 개의 패킷을 중계할 수 있다.



**중계할 수 있는 패킷의 수**

스위칭 허브 > 리피터 허브

지금까지 알아본 것: 리피터 허브 => 스위칭 허브로 신호 전달 => 스위칭 허브에서 MAC 주소에 알맞은 포트로 신호 송신 => 이제 라우터가 등장!



##### 라우터

Q6. 라우터란?

A6. 중계 대상을 등록한 표와 패킷의 IP에 기록된 수신처 IP의 네트워크 번호 부분을 조사하여 중계 대상으로 패킷을 보내는 장치. 자신이 송신처나 수신처의 두 가지 역할을 모두 할 수 있다.



Q7. 넷마스크란?

A7. IP 주소의 네트워크 번호와 호스트 번호를 구분할 수 있도록 비트로 표시해 놓은 것을 말한다.

ex)

IP주소:     00001010.00000001.00000010.00000011

넷마스크: 11111111.11111111.11111111.00000000

​				<-------------------------------------------  -------------->

​				네트워크 번호									호스트 번호



Q8. 게이트웨이란?

A8. 한 네트워크에서 다른 네트워크로 이동하기 위해 거쳐야 하는 지점. 라우터를 포함하는 개념이다.



Q9. 스위칭 허브와 라우터의 차이?

A9. 스위칭 허브는 송신처나 수신처 중 한 가지 역할만을 하지만, 라우터는 송신처나 수신처 두 가지 역할을 모두 할 수 있다.

 스위칭 허브는 MAC 주소 테이블을 이용하고, 라우터는 경로표를 이용한다. 이 때 스위칭 허브는 MAC 주소 테이블에 정보를 등록하거나 갱신하지만, 라우터는 경로표의 내용에 손대지 않는다.

스위칭 허브는 MAC 주소를 검사하지 않고 모든 패킷을 수신하여 버퍼 메모리에 저장한 후에 MAC 주소를 검사하지만, 라우터는 자신의 MAC 주소에 해당하는 패킷만 수신하여 수신 버퍼 메모리에 저장하고, 나머지 패킷은 폐기한다.



Q10. 라우터의 패킷 수신 동작을 설명하시오.

A10. 신호 도착 - PHY 회로와 MAC 회로에서 **신호를 디지털 데이터로 변환** - 패킷 끝부분의 FCS를 점검하여 오류 점검 - 정상이면 MAC 헤더의 수신처 MAC 주소가 자신과 일치하는지 조사 - 일치하면 수신 버퍼 메모리에 저장, 그렇지 않으면 패킷을 폐기 - 패킷을 수신 버퍼 메모리에 저장했다면, MAC 헤더를 폐기하고 그 다음에 쓰여 있는 IP 헤더의 내용을 보고 패킷 중계 동작에 들어간다.



Q11. 패킷 중계 동작에 대해 간략히 설명하시오.

A11. 

- IP헤더의 내용을 보고 경로표에서 중계 대상을 조사 
- 우선 표에서 네트워크 번호가 일치하는 행들 중 네트워크 번호의 비트 수가 가장 긴 것을 찾아감(호스트의 수가 가장 작은 쪽을 찾아감)
- 네트워크 번호의 비트 수가 가장 긴 것이 여러 개라면, 메트릭 값이 가장 작은 쪽(목적지가 가장 가까운 쪽)을 중계 대상으로 선택
- 해당하는 행이 하나도 발견되지 않으면 패킷을 폐기하고 ICMP(인터넷 컨트롤 메시지 프로토콜) 메시지로 이를 통지한다.



Q12. 라우터의 송신 동작을 설명하시오.

A12. 라우터의 패킷 송신 동작은 출력측 포트가 어떤 것이냐에 따라 달라진다. 이더넷이라면 이더넷의 규칙을 ADSL이라면 ADSL의 규칙을 따르게 된다. 이더넷의 경우는 다음과 같다.

- 경로표를 이용하여 중계 대상의 IP와 MAC 주소를 조사하고, 송신 패킷을 만든다.
- 반이중이라면 케이블에 신호가 흐르지 않는 것을 확인한 후 신호를 송출하고, 전이중 모드라면 케이블 신호를 확인하지 않고 그대로 신호를 송신한다.



Q13. 라우터와 스위칭 허브의 관계는?

A13. 통신 상대까지 패킷을 전달하는 전체 동작은 라우터(IP)가 담당하고, 이 동작을 할 때 다음 라우터까지 패킷을 운반하는 부분은 스위칭 허브(이더넷)가 담당한다.